# inspect

- Проверка типов объектов `ismodule()`, `isclass()`, `ismethod()`, `isfunction()`, `isgeneratorfunction()`,
`isgenerator()`, `istraceback()`, `isframe()`, `iscode()`, `isbuiltin()`, `isroutine()`
- Получение членов объекта, удовлетворяющих заданному условию - `getmembers()`
<br>
- Поиск исходного кода объекта - `getfile()`, `getsourcefile()`, `getsource()`
- Получение документации по объекту - `getdoc()`, `getcomments()`
- Определение модуля, из которого поступил объект - `getmodule()`
- Упорядочивание классов таким образом, чтобы они представляли их иерархию - `getclasstree()`
<br>
- Получение информации об аргументах функции - `getargvalues()`, `getcallargs()`
- То же самое, с поддержкой функций Python 3 - `getfullargspec()`
- Форматирование спецификации аргумента - `formatargvalues()`
- Получение информации о кадрах - `getouterframes()`, `getinnerframes()`
- Получение текущего кадра стека - `currentframe()`
- Получение информации о кадрах в стеке или в трассировке - `stack()`, `trace()`
<br>
- Получить объект Signature для вызываемого - `signature()`
<br>
- Безопасно вычислить аннотации объекта - `get_annotations()`

# \_\_all\_\_

| **Название**                 | **Описание**                                                                                                                            |
|------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| `ArgInfo`                    | Класс, представляющий информацию об аргументах функции                                                                                  |
| `Arguments`                  | Класс, описывающий аргументы функции, включая позиционные, ключевые и их значения по умолчанию                                          |
| `Attribute`                  | Класс для описания атрибутов объекта, используемый внутри библиотеки `inspect`                                                          |
| `BlockFinder`                | Внутренний класс для поиска блоков кода в исходном файле                                                                                |
| `BoundArguments`             | Класс, представляющий привязанные аргументы функции после вызова                                                                        |
| `CORO_CLOSED`                | Константа, указывающая, что корутина закрыта                                                                                            |
| `CORO_CREATED`               | Константа, указывающая, что корутина создана, но еще не запущена                                                                        |
| `CORO_RUNNING`               | Константа, указывающая, что корутина в процессе выполнения                                                                              |
| `CORO_SUSPENDED`             | Константа, указывающая, что корутина приостановлена                                                                                     |
| `CO_ASYNC_GENERATOR`         | Флаг состояния объекта кода, указывающий, что это асинхронный генератор                                                                 |
| `CO_COROUTINE`               | Флаг состояния объекта кода, указывающий, что это корутина                                                                              |
| `CO_GENERATOR`               | Флаг состояния объекта кода, указывающий, что это генератор                                                                             |
| `CO_ITERABLE_COROUTINE`      | Флаг состояния объекта кода, указывающий, что это итерируемая корутина                                                                  |
| `CO_NESTED`                  | Флаг состояния объекта кода, указывающий, что функция является вложенной                                                                |
| `CO_NEWLOCALS`               | Флаг состояния объекта кода, указывающий, что функция использует новые локальные переменные                                             |
| `CO_NOFREE`                  | Флаг состояния объекта кода, указывающий, что функция не использует свободные переменные                                                |
| `CO_OPTIMIZED`               | Флаг состояния объекта кода, указывающий, что функция оптимизирована                                                                    |
| `CO_VARARGS`                 | Флаг состояния объекта кода, указывающий,<br>что функция принимает произвольное количество позиционных аргументов (*args)               |
| `CO_VARKEYWORDS`             | Флаг состояния объекта кода, указывающий,<br>что функция принимает произвольное количество именованных аргументов (**kwargs)            |
| `ClassFoundException`        | Исключение, возникающее при поиске класса в дереве наследования                                                                         |
| `ClosureVars`                | Класс, представляющий закрытые переменные функции (closure variables)                                                                   |
| `EndOfBlock`                 | Класс, обозначающий конец блока кода при анализе исходного файла                                                                        |
| `FrameInfo`                  | Класс, представляющий информацию о фрейме стека вызовов (файл, строка, функция и т.д.)                                                  |
| `FullArgSpec`                | Класс, представляющий полную спецификацию аргументов функции,<br>включая позиционные, ключевые, аргументы с дефолтными значениями и т.д |
| `GEN_CLOSED`                 | Константа, указывающая, что генератор закрыт                                                                                            |
| `GEN_CREATED`                | Константа, указывающая, что генератор создан, но еще не запущен                                                                         |
| `GEN_RUNNING`                | Константа, указывающая, что генератор в процессе выполнения                                                                             |
| `GEN_SUSPENDED`              | Константа, указывающая, что генератор приостановлен                                                                                     |
| `Parameter`                  | Класс, представляющий отдельный параметр функции, включая его имя, тип и значение по умолчанию                                          |
| `Signature`                  | Класс, представляющий сигнатуру функции, включая параметры и возвращаемое значение                                                      |
| `TPFLAGS_IS_ABSTRACT`        | Константа флага, указывающая, что класс является абстрактным                                                                            |
| `Traceback`                  | Класс, представляющий трассировку исключения (стек вызовов) в момент возникновения исключения                                           |
| `classify_class_attrs`       | Функция для классификации атрибутов класса на методы, поля и т.д                                                                        |
| `cleandoc`                   | Функция для очистки строковой документации от лишних отступов и пустых строк                                                            |
| `currentframe`               | Функция, возвращающая текущий фрейм стека вызовов                                                                                       |
| `findsource`                 | Функция для поиска исходного кода объекта (функции, класса и т.д.)                                                                      |
| `formatannotation`           | Функция для форматирования аннотаций типов                                                                                              |
| `formatannotationrelativeto` | Функция для форматирования аннотаций типов относительно указанного модуля                                                               |
| `formatargvalues`            | Функция для форматирования значений аргументов функции                                                                                  |
| `get_annotations`            | Функция для получения аннотаций типов объекта                                                                                           |
| `getabsfile`                 | Функция для получения абсолютного пути к файлу, в котором определен объект                                                              |
| `getargs`                    | Устаревшая функция для получения имен аргументов функции (используйте `getfullargspec` или `signature`)                                 |
| `getargvalues`               | Функция для получения значений аргументов в текущем фрейме                                                                              |
| `getattr_static`             | Функция для статического получения атрибута объекта без вызова<br>`__getattr__` и других динамических механизмов доступа к атрибутам    |
| `getblock`                   | Внутренняя функция для получения блока кода из исходного файла                                                                          |
| `getcallargs`                | Функция для получения соответствия между аргументами<br>и параметрами функции при вызове с конкретными аргументами                      |
| `getclasstree`               | Функция для построения дерева наследования классов                                                                                      |
| `getclosurevars`             | Функция для получения закрытых переменных функции (closure)                                                                             |
| `getcomments`                | Функция для получения комментариев,<br>предшествующих определению объекта (функции, класса и т.д.)                                      |
| `getcoroutinelocals`         | Функция для получения локальных переменных корутины                                                                                     |
| `getcoroutinestate`          | Функция для получения текущего состояния корутины                                                                                       |
| `getdoc`                     | Функция для получения строки документации объекта                                                                                       |
| `getfile`                    | Функция для получения имени файла, в котором определен объект                                                                           |
| `getframeinfo`               | Функция для получения информации о фрейме стека вызовов                                                                                 |
| `getfullargspec`             | Функция для получения полной спецификации аргументов функции                                                                            |
| `getgeneratorlocals`         | Функция для получения локальных переменных генератора                                                                                   |
| `getgeneratorstate`          | Функция для получения текущего состояния генератора                                                                                     |
| `getinnerframes`             | Функция для получения всех внутренних фреймов стека вызовов                                                                             |
| `getlineno`                  | Функция для получения номера строки, где определен объект                                                                               |
| `getmembers`                 | Функция для получения всех членов объекта<br>(атрибутов, методов и т.д.) с возможностью фильтрации                                      |
| `getmembers_static`          | Внутренняя функция для статического получения членов объекта                                                                            |
| `getmodule`                  | Функция для получения модуля, в котором определен объект                                                                                |
| `getmodulename`              | Функция для получения имени модуля по пути к файлу                                                                                      |
| `getmro`                     | Функция для получения метода разрешения порядка (MRO) для класса                                                                        |
| `getouterframes`             | Функция для получения всех внешних фреймов стека вызовов                                                                                |
| `getsource`                  | Функция для получения исходного кода объекта (функции, класса и т.д.)                                                                   |
| `getsourcefile`              | Функция для получения исходного файла объекта                                                                                           |
| `getsourcelines`             | Функция для получения исходного кода объекта<br>в виде списка строк и номера начальной строки                                           |
| `indentsize`                 | Внутренняя функция для определения размера отступа в исходном коде                                                                      |
| `isabstract`                 | Функция для проверки, является ли класс абстрактным                                                                                     |
| `isasyncgen`                 | Функция для проверки, является ли объект асинхронным генератором                                                                        |
| `isasyncgenfunction`         | Функция для проверки, является ли объект функцией асинхронного генератора                                                               |
| `isawaitable`                | Функция для проверки, можно ли ожидать<br>объект (поддерживает `__await__` или является корутиной)                                      |
| `isbuiltin`                  | Функция для проверки, является ли объект встроенной функцией или методом                                                                |
| `isclass`                    | Функция для проверки, является ли объект классом                                                                                        |
| `iscode`                     | Функция для проверки, является ли объект объектом кода (`code object`)                                                                  |
| `iscoroutine`                | Функция для проверки, является ли объект корутиной                                                                                      |
| `iscoroutinefunction`        | Функция для проверки, является ли объект функцией корутиной                                                                             |
| `isdatadescriptor`           | Функция для проверки, является ли объект дескриптором данных                                                                            |
| `isframe`                    | Функция для проверки, является ли объект фреймом стека вызовов                                                                          |
| `isfunction`                 | Функция для проверки, является ли объект функцией                                                                                       |
| `isgenerator`                | Функция для проверки, является ли объект генератором                                                                                    |
| `isgeneratorfunction`        | Функция для проверки, является ли объект функцией генератора                                                                            |
| `isgetsetdescriptor`         | Функция для проверки, является ли объект дескриптором getset                                                                            |
| `ismemberdescriptor`         | Функция для проверки, является ли объект дескриптором члена класса                                                                      |
| `ismethod`                   | Функция для проверки, является ли объект методом                                                                                        |
| `ismethoddescriptor`         | Функция для проверки, является ли объект дескриптором метода                                                                            |
| `ismethodwrapper`            | Функция для проверки, является ли объект оберткой метода                                                                                |
| `ismodule`                   | Функция для проверки, является ли объект модулем                                                                                        |
| `isroutine`                  | Функция для проверки, является ли объект вызываемой рутиной (функцией или методом)                                                      |
| `istraceback`                | Функция для проверки, является ли объект трассировкой исключения (`traceback object`)                                                   |
| `signature`                  | Функция для получения сигнатуры функции или метода                                                                                      |
| `stack`                      | Функция для получения текущего стека вызовов в виде списка `FrameInfo`                                                                  |
| `trace`                      | Функция для трассировки выполнения кода,<br>вызывающая заданную функцию для каждого фрейма стека                                        |
| `unwrap`                     | Функция для получения оригинальной функции, удаляя все декораторы                                                                       |
| `walktree`                   | Внутренняя функция для обхода дерева наследования классов                                                                               |

#### Примечание

- **Константы состояния корутин и генераторов** (`CORO_*`, `GEN_*`, `CO_*`)
используются для определения текущего состояния корутин и генераторов.
- **Внутренние классы и функции** (например, `BlockFinder`, `walktree`)
обычно используются внутри библиотеки `inspect`
и не предназначены для прямого использования пользователями.
- **Функции для работы с аргументами и сигнатурами** (`getfullargspec`, `signature`, `getcallargs`)
позволяют детально анализировать параметры функций и методы их вызова.
- **Функции проверки типов объектов** (`isclass`, `isfunction`, `ismethod` и т.д.)
полезны для динамического анализа объектов во время выполнения программы.
- **Функции для получения исходного кода и документации** (`getsource`, `getdoc`, `findsource`)
позволяют извлекать информацию о коде для целей отладки или генерации документации.
- **Функции работы со стеком вызовов** (`currentframe`, `stack`, `getframeinfo`)
полезны для отладки и анализа выполнения программы.

# Примеры

`import inspect`

### getmembers

```python
class MyClass:
  def method1(self):
      pass

  def method2(self):
      pass

inspect.getmembers(MyClass, inspect.isfunction)
# [("method1", <function MyClass.method1>), ("method2", <function MyClass.method2>)]
```

### signature

```python
def my_function(a, b=10, *args, **kwargs):
  pass

sig = inspect.signature(my_function)
print(sig)  # <Signature (a, b=10, *args, **kwargs)>
print(sig.parameters)
# mappingproxy(OrderedDict([
#     ("a", <Parameter "a">),
#     ("b", <Parameter "b=10">),
#     ("args", <Parameter "*args">),
#     ("kwargs", <Parameter "**kwargs">)
# ]))
```

### stack

```python
def function_a():
    function_b()

def function_b():
    stack = inspect.stack()  # Получение информации о стеке
    for frame in stack:
        print(f"Function {frame.function} at line {frame.lineno} in {frame.filename}")

function_a()
```

### currentframe

```python
frame = inspect.currentframe()  # Получение текущего фрейма
print(f"Current frame at line {frame.f_lineno} in {frame.f_code.co_filename}")
```

# Полезные ссылки

- [Официальная документация](https://docs.python.org/3/library/inspect.html)
- [PEP 362 - Подписи вызовов](https://www.python.org/dev/peps/pep-0362/)
- [Real Python - Inspect Module](https://realpython.com/python-inspect-module/)
