# Работа с файлами и директориями

| Функция/Атрибут                     | Описание                                                                                                                                              |
|-------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|
| `os.listdir(".")`                   | Возвращает список файлов и директорий в указанном каталоге                                                                                            |
| `os.scandir(path=".")`              | Возвращает итератор `DirEntry`, который предоставляет информацию<br>о файлах и директориях в директории `path`.<br>Более выгодный аналог `os.listdir` |
| `os.walk(".")`                      | Рекурсивно обходит файлы в дереве директорий                                                                                                          |
| `os.getcwd()`                       | Возвращает текущий рабочий каталог                                                                                                                    |
| `os.chdir(path)`                    | Изменяет текущий рабочий каталог на указанный                                                                                                         |
| `os.mkdir(path, mode=0o777)`        | Создает новую директорию с указанным путем и правами доступа                                                                                          |
| `os.makedirs(path, exist_ok=True)`  | Рекурсивно создает директории, включая промежуточные                                                                                                  |
| `os.removedirs(path)`               | Удаляет директории рекурсивно                                                                                                                         |
| `os.remove(path)`                   | Удаляет файл по указанному пути                                                                                                                       |
| `os.rmdir(path)`                    | Удаляет пустую директорию                                                                                                                             |
| `os.rename(src, dst)`               | Переименовывает файл или директорию                                                                                                                   |
| `os.replace(src, dst)`              | Перемещает файл или директорию на новое место. Если целевой путь существует, он будет заменен                                                         |
| `os.urandom(n)`                     | Возвращает `n` байт случайных данных, пригодных для использования в криптографии                                                                      |
| `os.unlink(path)`                   | Удаляет файл по указанному пути (аналог `os.remove`)                                                                                                  |
| `os.symlink(src, dst)`              | Создает символическую ссылку на файл или директорию (только Unix)                                                                                     |
| `os.stat(path)`                     | [[Languages/Python/Libraries/System/os/os.stat]] Возвращает информацию о пути (например, размер, время последней модификации)                         |
| `os.lstat(path)`                    | То же, что и `os.stat`, но не разыменовывает символические ссылки                                                                                     |
| `os.path`                           | [[Languages/Python/Libraries/System/os/os.path]] Содержит функции для работы с путями, такие как `join`, `split`, `isfile`, `isdir`                   |

# Управление процессами

| Функция/Атрибут            | Описание                                                                                                                                        |
|----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| `os.system(command)`       | Выполняет команду в оболочке и возвращает код завершения                                                                                        |
| `os.popen(command)`        | Выполняет команду в оболочке и возвращает объект файла, связанный с потоком вывода                                                              |
| `os.kill(pid, sig)`        | Отправляет сигнал процессу с указанным идентификатором (PID) и [[Languages/Python/Libraries/System/signal]]<br>`os.kill(12345, signal.SIGTERM)` |
| `os._exit(n)`              | Немедленно завершает выполнение текущего процесса с указанным кодом возврата                                                                    |
| `os.waitpid(pid, options)` | Ожидает завершения процесса с указанным идентификатором (PID) и возвращает его код завершения и статус                                          |
| `os.fork()`                | Создает новый процесс путем форкинга текущего (только для Unix)                                                                                 |
| `os.execv(path, args)`     | Заменяет текущий процесс новым процессом, указанным в path                                                                                      |
| `os.abort()`               | Немедленно завершает процесс сгенерировав сигнатуру `SIGABRT`                                                                                   |
| `os.getpid()`             | Возвращает идентификатор текущего процесса                                                                                                       |
| `os.getppid()`            | Возвращает идентификатор родительского процесса                                                                                                  |

# Работа с файловыми дескрипторами

| Функция/Атрибут                    | Описание                                                                                                                    |
|------------------------------------|-----------------------------------------------------------------------------------------------------------------------------|
| `os.open(path, flags, mode=0o777)` | Открывает файл и возвращает файловый дескриптор. `flags` определяет режим открытия (например, `os.O_RDONLY`, `os.O_WRONLY`) |
| `os.close(fd)`                     | Закрывает файловый дескриптор `fd`                                                                                          |
| `os.read(fd, n)`                   | Читает до `n` байт из файла, связанного с файловым дескриптором `fd`                                                        |
| `os.write(fd, str)`                | Записывает строку в файл, связанный с файловым дескриптором `fd`                                                            |
| `os.lseek(fd, pos, how)`           | Перемещает указатель чтения/записи в файл, связанный с файловым дескриптором `fd`. `how` определяет начало перемещения      |
| `os.fsync(fd)`                     | Принудительно записывает все изменения, сделанные в файле, связанный с файловым дескриптором `fd`                           |
| `os.dup(fd)`                       | Дублирует файловый дескриптор `fd`                                                                                          |
| `os.dup2(fd, fd2)`                 | Дублирует файловый дескриптор `fd` в `fd2`                                                                                  |

# Функции для работы с файловыми системами

| Функция                    | Описание                                                     |
|----------------------------|--------------------------------------------------------------|
| `os.fsencode("filename")`  | Кодирует имя файла в системную кодировку                     |
| `os.fsdecode(b"filename")` | Декодирует имя файла из системной кодировки                  |
| `os.get_exec_path()`       | Возвращает список путей для поиска исполняемых файлов        |
| `os.fdopen(fd, mode)`      | Открывает файловый объект, связанный с файловым дескриптором |

# Атрибуты, связанные с путями и разделителями

| Атрибут      | Описание                                                                                                             |
|--------------|----------------------------------------------------------------------------------------------------------------------|
| `os.altsep`  | Альтернативный разделитель пути. Используется, если он поддерживается ОС. В Windows это `/` вместо `\`               |
| `os.curdir`  | Строка, представляющая текущую директорию. Обычно это `.`                                                            |
| `os.pardir`  | Строка, представляющая родительскую директорию. Обычно это `..`                                                      |
| `os.sep`     | Строка, представляющая разделитель пути, используемый в операционной системе. В Windows это `\`, в Unix — `/`        |
| `os.pathsep` | Строка, разделяющая компоненты в переменных среды, таких как `PATH`. В Windows это `;`, в Unix — `:`                 |
| `os.linesep` | Строка, представляющая разделитель строк, используемый в операционной системе. В Windows это `\r\n`, в Unix — `\n`   |
| `os.defpath` | Стандартный `PATH`, используемый если переменная окружения `PATH` не установлена                                     |
| `os.extsep`  | Разделитель расширения файлов. В большинстве ОС это `.`                                                              |
| `os.devnull` | Путь к специальному файлу, который отбрасывает все записанные в него данные (`/dev/null` на UNIX и `NUL` на Windows) |

# Информация о системе и среде выполнения

| Атрибут/Функция                | Описание                                                                                   |
|--------------------------------|--------------------------------------------------------------------------------------------|
| `os.name`                      | Имя операционной системы. Например, `posix` для Unix-подобных систем, `nt` для Windows     |
| `os.getenv(key, default=None)` | Возвращает значение переменной окружения или значение по умолчанию                         |
| `os.environ`                   | Словарь, содержащий переменные окружения                                                   |
| `os.getlogin()`                | Возвращает имя пользователя, вошедшего в систему                                           |
| `os.getpid()`                  | Возвращает идентификатор текущего процесса                                                 |
| `os.getppid()`                 | Возвращает идентификатор родительского процесса                                            |
| `os.cpu_count()`               | Возвращает количество процессоров в системе                                                |
| `os.uname()`                   | Возвращает информацию о системе, такую как имя системы, имя узла и версию ОС (только Unix) |
| `os.putenv(key, value)`        | Устанавливает значение переменной окружения **(не рекомендуется)**                         |
| `os.unsetenv(key)`             | Удаляет переменную окружения **(не рекомендуется)**                                        |

# Константы для работы с правами доступа и процессами

| Константа          | Описание                                                                                                 |
|--------------------|----------------------------------------------------------------------------------------------------------|
| `os.F_OK`          | Проверка на существование файла (используется в `os.access`)                                             |
| `os.R_OK`          | Проверка на возможность чтения файла (используется в `os.access`)                                        |
| `os.W_OK`          | Проверка на возможность записи в файл (используется в `os.access`)                                       |
| `os.X_OK`          | Проверка на возможность выполнения файла (используется в `os.access`)                                    |
| `os.EX_OK`         | Статус выхода для успешного выполнения команды (обычно 0)                                                |
| `os.O_RDONLY`      | Открытие файла только для чтения                                                                         |
| `os.O_WRONLY`      | Открытие файла только для записи                                                                         |
| `os.O_RDWR`        | Открытие файла для чтения и записи                                                                       |
| `os.O_CREAT`       | Создание файла, если он не существует                                                                    |
| `os.O_EXCL`        | Используется с `O_CREAT`, чтобы убедиться, что операция создания не завершится, если файл уже существует |
| `os.O_TRUNC`       | Очищает файл при его открытии, если он существует                                                        |
| `os.O_APPEND`      | Добавление данных в конец файла                                                                          |
| `os.O_BINARY`      | Открытие файла в бинарном режиме (Windows)                                                               |
| `os.O_TEXT`        | Открытие файла в текстовом режиме (Windows)                                                              |
| `os.O_TEMPORARY`   | Открытие временного файла (Windows)                                                                      |
| `os.O_SHORT_LIVED` | Указание, что файл будет существовать недолго (Windows)                                                  |
| `os.O_SEQUENTIAL`  | Указание, что файл будет читаться последовательно (Windows)                                              |
| `os.O_RANDOM`      | Указание, что файл будет читаться в произвольном порядке (Windows)                                       |
| `os.P_NOWAIT`      | Дочерний процесс запускается, но родительский процесс продолжает выполнение (используется в `os.spawnv`) |
| `os.P_WAIT`        | Родительский процесс ожидает завершения дочернего процесса (используется в `os.spawnv`)                  |
| `os.P_DETACH`      | Дочерний процесс отделяется от родителя и не может получить доступ к его оконному интерфейсу (Windows)   |

# Управление файловыми дескрипторами

| Переменная    | Описание                                            |
|---------------|-----------------------------------------------------|
| `os.SEEK_SET` | Смещение для начала файла (значение `0`)            |
| `os.SEEK_CUR` | Смещение для текущей позиции в файле (значение `1`) |
| `os.SEEK_END` | Смещение для конца файла (значение `2`)             |

## Примеры использования

### Получение списка всех поддиректорий в директории:
```python
import os

print([f.path for f in os.scandir("my_dir") if f.is_dir()])
```

### Работа с файловыми путями
```pycon
>>> import os
>>>
>>> path = "/path/to/file.txt"
>>> print("Базовое имя файла:", os.path.basename(path))
Базовое имя файла: file.txt
>>> print("Директория:", os.path.dirname(path))
Директория: /path/to
>>> print("Существует ли файл:", os.path.exists(path))
Существует ли файл: False
```

### Работа с файлами
```python
import os

fd = os.open("example.txt", os.O_CREAT | os.O_WRONLY)
os.write(fd, b"Hello, World!")
os.close(fd)
```

### Чтение и запись через файловый дескриптор
```python
import os

fd = os.open("file.txt", os.O_RDWR | os.O_CREAT)
os.write(fd, b"Hello, World!")
os.lseek(fd, 0, os.SEEK_SET)
print(os.read(fd, 12))
os.close(fd)
```

### Выполнение системной команды и получение результата
```python
import os

stream = os.popen("ls")
output = stream.read()
print(output)
```

### Получение случайных данных
```pycon
>>> import os
>>>
>>> random_bytes = os.urandom(16)
>>> print("Случайные байты:", random_bytes)
Случайные байты: b"U\x1c\x9a\xec\x80E!\xc2\xdaR\x03\xab\xb8\x19\xe0\xa4"
```

```python
import os

with os.scandir("directory") as it:
    for entry in it:
        print(entry.name, entry.is_file(), entry.is_dir())
```

### Выполнение команды в оболочке
```python
import os

os.system("echo Hello, World!")
```

### Работа с путями
```python
import os

print("Разделитель путей:", os.sep)
print("Разделитель расширений:", os.extsep)
print("Путь к devnull:", os.devnull)
```

### Создание и удаление директорий
```python
import os

os.makedirs("example_dir/subdir")
os.removedirs("example_dir/subdir")
```

# Полезные ссылки
- [Официальная документация](https://docs.python.org/3/library/os.html)
- [Real Python - How to Use Python’s os and subprocess Modules](https://realpython.com/python-os-module/)
- [Real Python - Working with Files in Python](https://realpython.com/working-with-files-in-python/)
