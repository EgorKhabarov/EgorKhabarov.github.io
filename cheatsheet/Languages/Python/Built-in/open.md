# open

```python
open(
    file="<path>",
    mode="r",
    buffering=-1,
    encoding=None,
    errors=None,
    newline=None,
    closefd=True,
    opener=None,
)
```


### Параметры
#### file путь к файлу
Обязательный параметр
Строка или объект с методом `__fspath__`, например `pathlib.Path`

#### mode режим открытия файла

| Символ | Значение                            |
|--------|-------------------------------------|
| `"r"`  | Чтение (по умолчанию)               |
| `"w"`  | Запись с обрезкой файла             |
| `"x"`  | Запись, ошибка если файл существует |
| `"a"`  | Дозапись в конец                    |
| `"b"`  | Бинарный режим                      |
| `"t"`  | Текстовый режим (по умолчанию)      |
| `"+"`  | Чтение и запись                     |

Допустимы комбинации, например: `"rb"`, `"w+t"`, `"a+b"`, `"r+"`

#### buffering управление буферизацией

| Значение | Поведение                                       |
|----------|-------------------------------------------------|
| `0`      | Без буфера (только для бинарного режима)        |
| `1`      | Построчная буферизация (только текстовый режим) |
| `>1`     | Размер буфера в байтах                          |
| `-1`     | Выбор по умолчанию (автоматически)              |

#### encoding (только в текстовом режиме)

Кодировка, например `"UTF-8"`, `"cp1251"`, `"ASCII"`

#### errors обработка ошибок кодировки

| Значение             | Поведение                              |
|----------------------|----------------------------------------|
| `"strict"`           | По умолчанию - выбросить исключение    |
| `"ignore"`           | Игнорировать ошибочные символы         |
| `"replace"`          | Заменить символом `"�"`                |
| `"backslashreplace"` | Использовать escape-последовательности |

#### newline перевод строк

| Значение | Поведение                                    |
|----------|----------------------------------------------|
| `None`   | Нормализовать переводы строк                 |
| `""`     | Не выполнять замену символов перевода строки |
| `"\n"`   | Использовать только \n                       |
| `"\r"`   | Использовать только \r                       |
| `"\r\n"` | Использовать только \r\n                     |

#### closefd

Используется только при передаче числового файлового дескриптора:

- `True` Закрыть дескриптор при `close()` (по умолчанию)
- `False` Не закрывать дескриптор

#### opener

Позволяет задать пользовательскую функцию открытия:

```python
def custom_opener(path, flags):
    return os.open(path, flags)

open("file.txt", "r", opener=custom_opener)
```

## Что возвращает `open()`

Возвращается файловый объект:

- В **текстовом режиме** `io.TextIOWrapper`
- В **бинарном режиме** один из:
    - `io.BufferedReader`
    - `io.BufferedWriter`
    - `io.BufferedRandom`
    - `io.FileIO`

## Методы файлового объекта
### Чтение

- `.read(size=-1)` Прочитать весь файл или `size` символов/байт
- `.readline(size=-1)` Прочитать одну строку
- `.readlines(hint=-1)` Прочитать все строки списком

### Запись

- `.write(s)` Записать строку или байты
- `.writelines(lines)` Записать список строк без добавления `\n`

### Работа с позицией

- `.seek(offset, whence=0)` Переместить указатель
- `.tell()` Текущая позиция в файле

### Управление файлом

- `.flush()` сбросить буфер
- `.close()` закрыть файл
- `.fileno()` числовой файловый дескриптор
- `.isatty()` подключён ли файл к терминалу

## Свойства файлового объекта

| Свойство         | Значение                                  |
|------------------|-------------------------------------------|
| `name`           | Имя файла                                 |
| `mode`           | Строка с режимом открытия                 |
| `closed`         | True, если файл закрыт                    |
| `encoding`       | Кодировка (для текстовых файлов)          |
| `errors`         | Стратегия обработки ошибок                |
| `newlines`       | Какие символы новой строки использовались |
| `buffer`         | Байтовый буфер (у `TextIOWrapper`)        |
| `line_buffering` | `True`/`False` - построчная буферизация   |

# Пример использования

```python
with open("example.txt", "r", encoding="UTF-8") as file:
    for line in file:
        print(line.strip())
```

`with` гарантирует закрытие файла автоматически даже при ошибке
