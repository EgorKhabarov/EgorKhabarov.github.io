```bash
notepad "C:/Program Files/PostgreSQL/16/data/pg_hba.conf"
```

```bash
net stop postgresql-x64-16
net start postgresql-x64-16
```

# Запись может быть сделана в одном из семи форматов

> local      база  пользователь  метод-аутентификации  [параметры-аутентификации]
> host       база  пользователь  адрес  метод-аутентификации  [параметры-аутентификации]
> hostssl    база  пользователь  адрес  метод-аутентификации  [параметры-аутентификации]
> hostnossl  база  пользователь  адрес  метод-аутентификации  [параметры-аутентификации]
> host       база  пользователь  IP-адрес  IP-маска  метод-аутентификации  [параметры-аутентификации]
> hostssl    база  пользователь  IP-адрес  IP-маска  метод-аутентификации  [параметры-аутентификации]
> hostnossl  база  пользователь  IP-адрес  IP-маска  метод-аутентификации  [параметры-аутентификации]


|                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
|--------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| local                    | Unix-сокеты                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| host                     | Подключения по `TCP/IP`. С `SSL` и без `SSL`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| hostssl                  | Подключения по `TCP/IP` с применением шифрования `SSL`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| hostnossl                | Противоположен `hostssl`. Подключения по `TCP/IP` без шифрования `SSL`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| база                     | - `all` - все базы данных<br>- `sameuser` - имя запрашиваемой базы данных совпадает с именем запрашиваемого пользователя<br>- `samerole` - запрашиваемый пользователь должен быть членом роли с таким же именем, как и у запрашиваемой базы данных.<br>  (`samegroup` — это устаревший, но допустимый вариант значения `samerole`.)<br>  Суперпользователи не становятся членами роли автоматически из-за `samerole`,<br>  а только если они являются явными членами роли, прямо или косвенно, и не только из-за того, что они суперпользователи.<br>- `replication` - если запрашивается подключение для физической репликации (для таких подключений не выбирается какая-то конкретная база данных).<br>Любое другое значение воспринимается как имя определённой базы `Postgres Pro`.<br>Несколько имён баз данных можно указать, разделяя их запятыми.<br>Файл, содержащий имена баз данных, можно указать, поставив знак `@` в начале его имени                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| пользователь             | - `all` - все пользователи.<br>  Имя группы начинается с `+`.<br>  (В `Postgres Pro` нет никакой разницы между пользователем и группой; знак + означает «совпадение любых ролей,<br>   которые прямо или косвенно являются членами роли», тогда как имя без знака `+` является подходящим только для этой конкретной роли.)<br>  Суперпользователь рассматривается как член роли, только если он явно является членом этой роли, прямо или косвенно,<br>  а не только потому, что он является суперпользователем.<br>Несколько имён пользователей можно указать, разделяя их запятыми.<br>Файл, содержащий имена пользователей, можно указать, поставив знак `@` в начале его имени                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| адрес                    | ip/mask<br>- `all` - любой IP-адрес<br>- `samehost` - любые IP-адреса данного сервера- <br>- `samenet` - любой адрес любой подсети, к которой сервер подключён напрямую<br><br>Имени, начинающееся с точки `.`, соответствует суффиксу актуального имени узла.<br>Так, `.example.com` будет соответствовать `foo.example.com` (а не только `example.com`).<br>Это поле применимо только к записям `host`, `hostssl` и `hostnossl`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| метод-аутентификации     | - `trust` - Разрешает безусловное подключение.<br>  Этот метод позволяет тому, кто может подключиться к серверу с базой данных `Postgres Pro`,<br>  войти под любым желаемым пользователем `Postgres Pro` без введения пароля и без какой-либо другой аутентификации. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-TRUST)<br>- `reject` - Отклоняет подключение безусловно.<br>  Полезна для «фильтрации» некоторых серверов группы, например, строка `reject` может отклонить попытку подключения одного компьютера,<br>  при этом следующая строка позволяет подключиться остальным компьютерам в той же сети.<br>- `scram-sha-256` Проверяет пароль пользователя, производя аутентификацию `SCRAM-SHA-256`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD)<br>- `md5` Проверяет пароль пользователя, производя аутентификацию `SCRAM-SHA-256` или `MD5`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD)<br>- `password` Требует для аутентификации введения клиентом незашифрованного пароля.<br>  Поскольку пароль посылается простым текстом через сеть, такой способ не стоит использовать, если сеть не вызывает доверия. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD)<br>- `gss` Для аутентификации пользователя использует `GSSAPI`. Этот способ доступен только для подключений по `TCP/IP`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#GSSAPI-AUTH)<br>- `sspi` Для аутентификации пользователя использует `SSPI`. Способ доступен только для `Windows`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#SSPI-AUTH)<br>- `ident` Получает имя пользователя операционной системы клиента, связываясь с сервером `Ident`,<br>  и проверяет, соответствует ли оно имени пользователя базы данных.<br>  Аутентификация ident может использоваться только для подключений по `TCP/IP`.<br>  Для локальных подключений применяется аутентификация peer. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-IDENT)<br>- `peer` Получает имя пользователя операционной системы клиента из операционной системы и проверяет,<br>  соответствует ли оно имени пользователя запрашиваемой базы данных.<br>  Доступно только для локальных подключений. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PEER)<br>- `ldap` Проводит аутентификацию, используя сервер `LDAP`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-LDAP)<br>- `radius` Проводит аутентификацию, используя сервер `RADIUS`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-RADIUS)<br>- `cert` Проводит аутентификацию, используя клиентский сертификат `SSL`. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-CERT)<br>- `pam` Проводит аутентификацию, используя службу подключаемых модулей аутентификации `PAM`, предоставляемую операционной системой. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PAM)<br>- `bsd` Проводит аутентификацию, используя службу аутентификации `BSD`, предоставляемую операционной системой. [Подробности](https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-BSD) |
| параметры-аутентификации | `имя=значение`<br>`clientcert` можно задать в любой записи hostssl.<br>Если он равен `1`, клиент должен представить подходящий (доверенный) сертификат `SSL`,<br>в дополнение к другим требованиям метода проверки подлинности                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |




> Удалённое соединение по `TCP/IP` невозможно, если сервер запущен без определения соответствующих значений
> для параметра конфигурации `listen_addresses`, поскольку по умолчанию система принимает подключения по `TCP/IP`
> только для локального адреса замыкания `localhost`.

[https://postgrespro.ru/docs/postgrespro/10/auth-pg-hba-conf](https://postgrespro.ru/docs/postgrespro/10/auth-pg-hba-conf)
