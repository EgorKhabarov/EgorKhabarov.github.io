<div class="code_element"><div class="lang_line"><text>bash</text><button class="copy_code_button" onclick="CopyCode(this)"><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><use href="#icon_code_copy"/></svg><text class="unselectable">Copy code</text></button></div><div class="code language-bash"><div class="highlight"><pre><span></span>notepad<span class="w"> </span><span class="s2">&quot;C:/Program Files/PostgreSQL/16/data/pg_hba.conf&quot;</span>
</pre></div></div></div>

<div class="code_element"><div class="lang_line"><text>bash</text><button class="copy_code_button" onclick="CopyCode(this)"><svg width="1.2em" height="1.2em" viewBox="0 0 24 24"><use href="#icon_code_copy"/></svg><text class="unselectable">Copy code</text></button></div><div class="code language-bash"><div class="highlight"><pre><span></span>net<span class="w"> </span>stop<span class="w"> </span>postgresql-x64-16
net<span class="w"> </span>start<span class="w"> </span>postgresql-x64-16
</pre></div></div></div>

<h1>Запись может быть сделана в одном из семи форматов</h1>
<blockquote>
<p>local     База Пользователь                   Метод-аутентификации [Параметры-аутентификации]
host      База Пользователь Адрес             Метод-аутентификации [Параметры-аутентификации]
hostssl   База Пользователь Адрес             Метод-аутентификации [Параметры-аутентификации]
hostnossl База Пользователь Адрес             Метод-аутентификации [Параметры-аутентификации]
host      База Пользователь IP-адрес IP-маска Метод-аутентификации [Параметры-аутентификации]
hostssl   База Пользователь IP-адрес IP-маска Метод-аутентификации [Параметры-аутентификации]
hostnossl База Пользователь IP-адрес IP-маска Метод-аутентификации [Параметры-аутентификации]</p>
</blockquote>
<h3>local</h3>
<p><code>local</code>
Unix-сокеты</p>
<h3>host</h3>
<p><code>host</code>
Подключения по <code>TCP/IP</code>
С <code>SSL</code> и без <code>SSL</code></p>
<h3>hostssl</h3>
<p><code>hostssl</code>
Подключения по <code>TCP/IP</code> с применением шифрования <code>SSL</code></p>
<h3>hostnossl</h3>
<p><code>hostnossl</code>
Противоположен <code>hostssl</code>
Подключения по <code>TCP/IP</code> без шифрования <code>SSL</code></p>
<h3>База</h3>
<ul>
<li><code>all</code> - Все базы данных</li>
<li><code>sameuser</code> - Имя запрашиваемой базы данных совпадает с именем запрашиваемого пользователя</li>
<li><code>samerole</code> - Запрашиваемый пользователь должен быть членом роли с таким же именем, как и у запрашиваемой базы данных</li>
<li>(<code>samegroup</code> - Это устаревший, но допустимый вариант значения <code>samerole</code>)</li>
<li>Суперпользователи не становятся членами роли автоматически из-за <code>samerole</code>, а только если они являются явными членами роли, прямо или косвенно, и не только из-за того, что они суперпользователи</li>
<li><code>replication</code> - Если запрашивается подключение для физической репликации (для таких подключений не выбирается какая-то конкретная база данных)</li>
<li>Любое другое значение воспринимается как имя определённой базы <code>Postgres Pro</code></li>
<li>Несколько имён баз данных можно указать, разделяя их запятыми</li>
<li>Файл, содержащий имена баз данных, можно указать, поставив знак <code>@</code> в начале его имени</li>
</ul>
<h3>Пользователь</h3>
<ul>
<li><code>all</code> - все пользователи</li>
<li>Имя группы начинается с <code>+</code></li>
<li>(В <code>Postgres Pro</code> нет никакой разницы между пользователем и группой; знак + означает «совпадение любых ролей, которые прямо или косвенно являются членами роли», тогда как имя без знака <code>+</code> является подходящим только для этой конкретной роли)</li>
<li>Суперпользователь рассматривается как член роли, только если он явно является членом этой роли, прямо или косвенно, а не только потому, что он является суперпользователем</li>
<li>Несколько имён пользователей можно указать, разделяя их запятыми</li>
<li>Файл, содержащий имена пользователей, можно указать, поставив знак <code>@</code> в начале его имени</li>
</ul>
<h3>Адрес</h3>
<p><code>ip</code>/<code>mask</code>
- <code>all</code> - Любой IP-адрес
- <code>samehost</code> - Любые IP-адреса данного сервера
- <code>samenet</code> - Любой адрес любой подсети, к которой сервер подключён напрямую
- Имени, начинающееся с точки <code>.</code>, соответствует суффиксу актуального имени узла
- Так <code>.example.com</code> будет соответствовать <code>foo.example.com</code> (а не только <code>example.com</code>)
- Это поле применимо только к записям <code>host</code>, <code>hostssl</code> и <code>hostnossl</code></p>
<h3>Метод-аутентификации</h3>
<ul>
<li><code>trust</code> - Разрешает безусловное подключение
Этот метод позволяет тому, кто может подключиться к серверу с базой данных <code>Postgres Pro</code>,
войти под любым желаемым пользователем <code>Postgres Pro</code> без введения пароля и без какой-либо другой аутентификации
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-TRUST">Подробности</a></li>
<li><code>reject</code> - Отклоняет подключение безусловно
Полезна для фильтрации некоторых серверов группы, например, строка <code>reject</code> может отклонить попытку подключения одного компьютера,
при этом следующая строка позволяет подключиться остальным компьютерам в той же сети</li>
<li><code>scram-sha-256</code> Проверяет пароль пользователя, производя аутентификацию <code>SCRAM-SHA-256</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD">Подробности</a></li>
<li><code>md5</code> Проверяет пароль пользователя, производя аутентификацию <code>SCRAM-SHA-256</code> или <code>MD5</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD">Подробности</a></li>
<li><code>password</code> Требует для аутентификации введения клиентом незашифрованного пароля
Поскольку пароль посылается простым текстом через сеть, такой способ не стоит использовать, если сеть не вызывает доверия
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PASSWORD">Подробности</a></li>
<li><code>gss</code> Для аутентификации пользователя использует <code>GSSAPI</code>
Этот способ доступен только для подключений по <code>TCP/IP</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#GSSAPI-AUTH">Подробности</a></li>
<li><code>sspi</code> Для аутентификации пользователя использует <code>SSPI</code>
Способ доступен только для <code>Windows</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#SSPI-AUTH">Подробности</a></li>
<li><code>ident</code> Получает имя пользователя операционной системы клиента, связываясь с сервером <code>Ident</code>,
и проверяет, соответствует ли оно имени пользователя базы данных
Аутентификация ident может использоваться только для подключений по <code>TCP/IP</code>
Для локальных подключений применяется аутентификация peer
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-IDENT">Подробности</a></li>
<li><code>peer</code> Получает имя пользователя операционной системы клиента из операционной системы и проверяет, соответствует ли оно имени пользователя запрашиваемой базы данных
Доступно только для локальных подключений
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PEER">Подробности</a></li>
<li><code>ldap</code> Проводит аутентификацию, используя сервер <code>LDAP</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-LDAP">Подробности</a></li>
<li><code>radius</code> Проводит аутентификацию, используя сервер <code>RADIUS</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-RADIUS">Подробности</a></li>
<li><code>cert</code> Проводит аутентификацию, используя клиентский сертификат <code>SSL</code>
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-CERT">Подробности</a></li>
<li><code>pam</code> Проводит аутентификацию, используя службу подключаемых модулей аутентификации <code>PAM</code>, предоставляемую операционной системой
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-PAM">Подробности</a></li>
<li><code>bsd</code> Проводит аутентификацию, используя службу аутентификации <code>BSD</code>, предоставляемую операционной системой
<a href="https://postgrespro.ru/docs/postgrespro/10/auth-methods#AUTH-BSD">Подробности</a></li>
</ul>
<h3>Параметры-аутентификации</h3>
<p><code>имя=значение</code>
<code>clientcert</code> можно задать в любой записи hostssl
Если он равен <code>1</code>, клиент должен представить подходящий (доверенный) сертификат <code>SSL</code>, в дополнение к другим требованиям метода проверки подлинности</p>
<blockquote>
<p>Удалённое соединение по <code>TCP/IP</code> невозможно, если сервер запущен без определения соответствующих значений
для параметра конфигурации <code>listen_addresses</code>, поскольку по умолчанию система принимает подключения по <code>TCP/IP</code>
только для локального адреса замыкания <code>localhost</code></p>
</blockquote>
<p><a href="https://postgrespro.ru/docs/postgrespro/10/auth-pg-hba-conf">https://postgrespro.ru/docs/postgrespro/10/auth-pg-hba-conf</a></p>