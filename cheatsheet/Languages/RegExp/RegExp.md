Регуля́рные выраже́ния — формальный язык, используемый в компьютерных программах,
работающих с текстом, для поиска и осуществления манипуляций с подстроками в тексте,
основанный на использовании метасимволов
Для поиска используется строка-образец, состоящая из символов и
метасимволов и задающая правило поиска


# Обозначения

|        |                                                                                                                                                                                                                                              |
|--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `.`    | Один любой символ, кроме новой строки `\n`                                                                                                                                                                                                   |
| `\d`   | Любая цифра ≈`[0-9]`                                                                                                                                                                                                                         |
| `\D`   | Любой символ, кроме цифры ≈`[^0-9]`                                                                                                                                                                                                          |
| `\s`   | Любой пробельный символ (пробел, табуляция, конец строки и т.п.) ≈`[ \f\n\r\t\v]`                                                                                                                                                            |
| `\S`   | Любой не пробельный символ                                                                                                                                                                                                                   |
| `\w`   | Любая буква (то, что может быть частью слова), а также цифры и `_`                                                                                                                                                                           |
| `\W`   | Любая не-буква, не-цифра и не подчёркивание                                                                                                                                                                                                  |
| `[ ]`  | Один из символов в скобках, а также любой символ из диапазона `a-z` `0-9`<br>Буква `ё` не включается в общий диапазон букв!<br>Если нужен минус, его нужно указать последним или первым<br>Внутри скобок нужно экранировать только `]` и `\` |
| `[^ ]` | Любой символ, кроме перечисленных                                                                                                                                                                                                            |
| `^`    | Начало всего текста или начало строчки текста, если `flags=re.MULTILINE`                                                                                                                                                                     |
| `$`    | Конец всего текста или конец строчки текста, если `flags=re.MULTILINE`                                                                                                                                                                       |
| `\A`   | Строго начало всего текста                                                                                                                                                                                                                   |
| `\Z`   | Строго конец всего текста                                                                                                                                                                                                                    |
| `\b`   | Начало или конец слова (слева пусто или не-буква, справа буква и наоборот)                                                                                                                                                                   |
| `\B`   | Не граница слова: либо и слева, и справа буквы, либо и слева, и справа НЕ буквы                                                                                                                                                              |


# Квантификаторы

Квантификатор — специальный ограничитель, который указывает количество возможных повторений символа,
группы символов или класса символов, находящихся в регулярном выражении перед ним

|                                            |                                                                                                                                                                                  |
|--------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `{n}`                                      | Ровно `n` повторений                                                                                                                                                             |
| `{m,n}`                                    | От `m` до `n` повторений включительно                                                                                                                                            |
| `{m,}`                                     | Не менее `m` повторений                                                                                                                                                          |
| `{,n}`                                     | Не более `n` повторений                                                                                                                                                          |
| `?`                                        | Ноль или одно вхождение, синоним `{0,1}`                                                                                                                                         |
| `*`                                        | Ноль или более, синоним `{0,}`                                                                                                                                                   |
| `+`                                        | Одно или более, синоним `{1,}`                                                                                                                                                   |
| `*?` `+?` `??`<br>`{m,n}?` `{,n}?` `{m,}?` | По умолчанию квантификаторы жадные — захватывают максимально возможное число символов.<br>Добавление `?` делает их ленивыми, они захватывают минимально возможное число символов |


# Условные выражения

| Условное выражение |                                                                          | Регулярка            | Соответствие                                                                                                                                               |
|--------------------|--------------------------------------------------------------------------|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `(?=.)`            | Позитивный просмотр вперёд                                               | `Людовик(?=XVI)`     | ЛюдовикXV, =={background-color: #999999}Людовик==XVI, =={background-color: #999999}Людовик==XVIII, ЛюдовикLXVII, ЛюдовикXXL                                |
| `(?!.)`            | Негативный просмотр вперёд                                               | `Людовик(?!XVI)`     | =={background-color: #999999}Людовик==XV, ЛюдовикXVI, ЛюдовикXVIII, =={background-color: #999999}Людовик==LXVII, =={background-color: #999999}Людовик==XXL |
| `(?<=.)`           | Позитивный просмотр назад<br>**Длина шаблона должна быть фиксированной** | `(?<=Сергей )Иванов` | Сергей =={background-color: #999999}Иванов==, Игорь Иванов                                                                                                 |
| `(?<!.)`           | Негативный просмотр назад                                                | `(?<!Сергей )Иванов` | Сергей Иванов, Игорь =={background-color: #999999}Иванов==                                                                                                 |

## Выполнить операции в зависимости от того, была ли захвачена определенная группа

Формат условного выражения:

```regexp
(?(condition)true-regex|false-regex)
```

- `condition`: Условие, которое проверяется. Обычно это номер группы захвата (например, `1` для первой группы)
- `true-regex`: Регулярное выражение, которое применяется, если условие истинно
- `false-regex`: Регулярное выражение, которое применяется, если условие ложно (опционально)

### Примеры условных выражений

#### Проверка наличия захваченной группы

```regexp
(a)?(?(1)b|c)
```

- `a` — необязательная группа
- `b` — применяется, если `a` присутствует (т.е., если группа 1 захвачена)
- `c` — применяется, если `a` отсутствует (т.е., если группа 1 не захвачена)

Совпадение: `ab` или `c`

#### Условные выражения с несколькими группами

```regexp
(a)(?(1)b|c)(d)?
```

- `a` — первая группа
- Если группа 1 захвачена, проверяется `b`
- Если группа 1 не захвачена, проверяется `c`
- `d` — необязательная группа, которая захватывается, если предыдущий шаблон совпал

Совпадение: `abd` или `cd` или `ab` или `c`


# Группы захвата

| Группа захвата      | Название                                                                                                                                  | Регулярка                   | Соответствие                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|---------------------|-------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `(?:pattern)`       | Незахватывающая группа                                                                                                                    | <code>(?:abc\|def)</code>   | 123 =={background-color: #999999}abc== 456                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `(pattern)`         | Неименованная группа захвата                                                                                                              | `(123)`                     | 0=={background-color: #999999}123==4<br><div class="code" style="border-radius:.375rem .375rem;"><div class="highlight"><pre><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;0(123)4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;01234&quot;</span><span class="p">)</span><br><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># 123</span><br><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>        <span class="c1"># 123</span><br><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># 01234</span><br><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>        <span class="c1"># 01234</span><br><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>   <span class="c1"># 01234</span><br></pre></div></pre></div></div> |
| `\1`                | Неименованная обратная ссылка<br>Позволяет ссылаться на ранее захваченные группы<br>по номеру порядка их появления в регулярном выражении | `(\d+)-\1`                  | 1 =={background-color: #999999}1-1== =={background-color: #999999}123-123==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `(?P<name>pattern)` | Именованная группа захвата                                                                                                                | `My name is (?P<name>\w+)`  | My name is =={background-color: #999999}John==<br><div class="code" style="border-radius:.375rem .375rem;"><div class="highlight"><pre><div class="highlight"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;My name is (?P&lt;name&gt;\w+)&quot;</span><span class="p">)</span> \<br><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="s2">&quot;My name is John&quot;</span><span class="p">)</span><br><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>  <span class="c1"># John</span><br><span class="n">m</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>        <span class="c1"># John</span><br></pre></div></pre></div></div>                                                                                                                                                                                                                                                                                                                                                                                                 |
| `(?P=name)`         | Именованная обратная ссылка<br>Позволяет ссылаться на ранее захваченные группы по имени                                                   | `(?P<word>\w+)\s+(?P=word)` | =={background-color: #999999}hello hello==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |


# Другое

| Паттерн                                                     | Название                                                                                                                                  | Регулярка                                                                                                                                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|-------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `(?>pattern)`                                               | Атомарная группа<br>Захватывает подстроку<br>и запрещает бэктрекинг*<br>внутри этой группы,<br>если остальная часть<br>шаблона не совпала | `(?>\d{3})\d`<br>Эта конструкция сначала пытается<br>сопоставить `\d{3}`, а затем `\d`.<br>Если первое выражение не совпадает,<br>оно не пытается вернуться назад | =={background-color: #999999}1234==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `(?R)` или `(?0)`                                           | Рекурсивный шаблон<br>Вставляет текущее регулярное<br>выражение внутрь самого себя                                                        | <code>\\((?:\[^()]+\|(?R))*\\)</code><br>Это регулярное выражение<br>сопоставляет сбалансированные скобки.<br>`re.error: unknown extension ?R at position 13`     | =={background-color: #999999}(a(b)c)==                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| <code>(?P&lt;name1>pattern1\|(?P&lt;name2>pattern2))</code> | Условные выражения<br>с именованными группами                                                                                             |                                                                                                                                                                   | <div class="code" style="border-radius:.375rem .375rem;"><div class="highlight"><pre><div class="highlight"><pre><span></span><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><br><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span>    <span class="sa">r</span><span class="s2">&quot;(?P&lt;name1&gt;pattern1\&#x7c;&quot;</span><br><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span>    <span class="sa">r</span><span class="s2">&quot;(?P&lt;name2&gt;pattern2))&quot;</span><br><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><br><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span>    <span class="s2">&quot;pattern2&quot;</span><br><span class="unselectable"><span class="o">&gt;&gt;&gt;</span> </span><span class="p">)</span><span class="o">.</span><span class="n">groupdict</span><span class="p">()</span><br><span class="unselectable"><span class="p">{</span></span><br><span class="unselectable">    <span class="s2">&quot;name1&quot;</span><span class="p">:</span> <span class="s2">&quot;pattern2&quot;</span><span class="p">,</span></span><br><span class="unselectable">    <span class="s2">&quot;name2&quot;</span><span class="p">:</span> <span class="s2">&quot;pattern2&quot;</span><span class="p">,</span></span><br><span class="unselectable"><span class="p">}</span></span><br></pre></div></pre></div></div> |


# Флаги

[https://docs.python.org/3/library/re.html#flags](https://docs.python.org/3/library/re.html#flags)

|                           |        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
|---------------------------|--------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `re.A`<br>`re.ASCII`      | `(?a)` | По умолчанию `\w`, `\W`, `\b`, `\B`, `\d`, `\D`, `\s`, `\S` соответствуют все юникодные<br>символы с соответствующим качеством. Ускоряет работу, если все соответствия лежат внутри ASCII                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `re.I`<br>`re.IGNORECASE` | `(?i)` | Не различать заглавные и маленькие буквы. Работает медленнее, но иногда удобно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `re.M`<br>`re.MULTILINE`  | `(?m)` | Специальные символы `^` и `$` соответствуют началу и концу каждой строки                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `re.S`<br>`re.DOTALL`     | `(?s)` | По умолчанию символ `\n` конца строки не подходит под точку. С этим флагом точка — вообще любой символ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `re.X`<br>`re.VERBOSE`    | `(?x)` | Пробелы внутри шаблона игнорируются, за исключением случаев,<br>когда они находятся в классе символов, или когда им предшествует неэкранированная<br>обратная косая черта, или внутри токенов,<br>таких как `*?`, `(?:` или `(?P<...>`. Например, и не допускаются.<br><div class="code" style="border-radius:.375rem .375rem;"><div class="highlight"><pre><div class="highlight"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><br><span class="w">   </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;</span><br><span class="sd">\d +  # the integral part</span><br><span class="sd">\\.    # the decimal point</span><br><span class="sd">\d *  # some fractional digits</span><br><span class="sd">&quot;&quot;&quot;</span><span class="p">,</span><br>   <span class="n">re</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><br><span class="p">)</span><br><span class="n">b</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+.\d*&quot;</span><span class="p">)</span><br><br><span class="c1"># Wrong!</span><br><span class="n">c</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><br><span class="w">   </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;(?s)</span><br><span class="sd">\d +  # the integral part</span><br><span class="sd">\\.    # the decimal point</span><br><span class="sd">\d *  # some fractional digits</span><br><span class="sd">&quot;&quot;&quot;</span><br><span class="p">)</span><br></pre></div></pre></div></div> |
| `re.L`<br>`re.LOCALE`     | `(?L)` | Сделать `\w`, `\W`, `\b`, \Bи соответствие без учета регистра зависимым от текущей локали.<br>Этот флаг можно использовать только с шаблонами байтов                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `re.U`<br>`re.UNICODE`    |        | В Python 3 символы Unicode сопоставляются по умолчанию для `str` шаблонов.<br>Поэтому этот флаг является избыточным, **не имеет никакого эффекта**<br>и сохраняется только для обратной совместимости                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `re.DEBUG`                |        | Отображение отладочной информации о скомпилированном выражении                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `re.NOFLAG`               |        | С версии 3.11                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

## Использование модификаторов

Можно объединять в одну группу: `(?i-sm)` (включает режим `i` и выключает режимы `s` и `m`)
Если требуется только в пределах группы, то шаблон после двоеточия
Например, `(?-i)(?i:A)bc` найдёт `abc` и `Abc`, но не `ABC`


# Команды

| Метод                                                                                                                                                                                                                                   | Описание                                                        |
|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------|
| re.match(    <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Ищет совпадение в начале строки                                 |
| re.search(   <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Ищет первое совпадение в строке                                 |
| re.findall(  <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> list                   | Возвращает список всех непересекающихся совпадений в строке     |
| re.finditer( <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Iterator\[Match\[str]] | Возвращает итератор по всем совпадениям в строке                |
| re.sub(      <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;repl: str \| (Match\[str]) -> str, <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str, count: int = 0, flags: int \| RegexFlag = 0<br>) -> str                   | Заменяет совпадения в строке на указанный текст                 |
| re.subn(     <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;repl: str \| (Match\[str]) -> str, <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str, count: int = 0, flags: int \| RegexFlag = 0<br>) -> tuple\[str, int]      | То же, что и `re.sub()`, но также возвращает количество замен   |
| re.split(    <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;maxsplit: int = 0, flags: int \| RegexFlag = 0          <br>) -> list\[str]             | Разбивает строку по шаблону и возвращает список строк           |
| re.fullmatch(<br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Проверяет, полностью ли строка соответствует шаблону            |
| re.compile(  <br>&nbsp;&nbsp;&nbsp;&nbsp;pattern: str,<br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0       <br>) -> Pattern\[AnyStr]                                                                                           | Компилирует регулярное выражение в объект регулярного выражения |

| Метод                                                                                                                                                                                                       | Описание                                                                   |
|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------|
| re.compile(...).match(    <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Ищет совпадение в начале строки                                            |
| re.compile(...).search(   <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Ищет первое совпадение в строке                                            |
| re.compile(...).findall(  <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> list                   | Возвращает список всех непересекающихся совпадений в строке                |
| re.compile(...).finditer( <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Iterator\[Match\[str]] | Возвращает итератор по всем совпадениям в строке                           |
| re.compile(...).sub(      <br>&nbsp;&nbsp;&nbsp;&nbsp;repl: str \| (Match\[str]) -> str, <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str, count: int = 0, flags: int \| RegexFlag = 0<br>) -> str                   | Заменяет совпадения в строке на указанный текст                            |
| re.compile(...).subn(     <br>&nbsp;&nbsp;&nbsp;&nbsp;repl: str \| (Match\[str]) -> str, <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str, count: int = 0, flags: int \| RegexFlag = 0<br>) -> tuple\[str, int]      | То же, что и `re.compile(...).sub()`, но также возвращает количество замен |
| re.compile(...).split(    <br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;maxsplit: int = 0, flags: int \| RegexFlag = 0          <br>) -> list\[str]             | Разбивает строку по шаблону и возвращает список строк                      |
| re.compile(...).fullmatch(<br>&nbsp;&nbsp;&nbsp;&nbsp;string: str,                      <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: int \| RegexFlag = 0                             <br>) -> Match\[str] \| None    | Проверяет, полностью ли строка соответствует шаблону                       |


<br>

```pycon
>>> import re
>>> def func(m):
...     return f"[censored({len(m[0])})]"
...
>>> text = "Некоторые хорошие слова подозрительны: хор, хоровод, хороводоводовед"
>>> print(re.sub(r"\b[хХxX]\w*", func, text))
Некоторые [censored(7)] слова подозрительны: [censored(3)], [censored(7)], [censored(15)]
```

# Примеры

|                                                                                                                           |                                                                                                     |
|---------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------|
| Набор из букв и цифр (латиница)                                                                                           | `^[a-zA-Z0-9]+$`                                                                                    |
| Набор из букв и цифр (латиница + кириллица)                                                                               | `^[а-яА-ЯёЁa-zA-Z0-9]+$`                                                                            |
| Домен (например `seo-zona.ru`)                                                                                            | `^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$`                                  |
| IPv4                                                                                                                      | <code>((25\[0-5]\|2\[0-4]\d\|\[01]?\d\d?)\.){3}(25\[0-5]\|2\[0-4]\d\|\[01]?\d\d?)</code>            |
| IPv6                                                                                                                      | <code>((^\|:)(\[0-9a-fA-F]{0,4})){1,8}$</code>                                                      |
| Имя пользователя<br>(с ограничением 2-20 символов,<br>которыми могут быть буквы и цифры, первый символ обязательно буква) | <code>^\[a-zA-Z]\[a-zA-Z0-9-_\.]{1,20}$</code>                                                      |
| Дата в формате `YYYY-MM-DD`                                                                                               | <code>\[0-9]{4}-(0\[1-9]\|1\[012])-(0\[1-9]\|1\[0-9]\|2\[0-9]\|3\[01])</code>                       |
| Дата в формате `DD/MM/YYYY`                                                                                               | <code>(0\[1-9]\|\[12]\[0-9]\|3\[01])\[- /.](0\[1-9]\|1\[012])\[- /.](19\|20)\d\d</code>             |
| Целые числа и числа с плавающей точкой (разделитель точка)                                                                | `-?\d+(\.\d{0,})?`                                                                                  |
| UUID                                                                                                                      | <code>^\[0-9A-Fa-f]{8}\-\[0-9A-Fa-f]{4}\-\[0-9A-Fa-f]{4}\-\[0-9A-Fa-f]{4}\-\[0-9A-Fa-f]{12}$</code> |
| Широта или долгота                                                                                                        | `-?\d{1,3}\.\d+`                                                                                    |
| Строка в одинарных кавычках                                                                                               | `'[^'\n]*?'`                                                                                        |

# Пример атомарной группы

Возьмем выражение `(?>a|ab)c` и строку `abc`:

1. Сначала регулярное выражение пытается сопоставить `a` внутри атомарной группы `(?>a|ab)`
2. После успешного совпадения с `a`, атомарная группа блокируется, и больше не возвращается назад, даже если дальнейшие совпадения не удаются
3. Затем выражение пытается сопоставить `c`, что не удается, потому что следующий символ `b`
4. В обычной группе регулярное выражение вернулось бы назад, чтобы попробовать сопоставить `ab` вместо `a`.<br>Но так как группа атомарная, бэктрекинг не происходит, и регулярное выражение не находит совпадения

```pycon
>>> import re
>>> simple_group = re.compile(r"(a|ab)c")
>>> atomic_group = re.compile(r"(?>a|ab)c")
>>> print(simple_group.search("abc").group())  # Обычная группа
abc
>>> print(atomic_group.search("abc"))  # Атомарная группа
None
>>> print(atomic_group.search("ac").group())
ac
```

# Бэктрекинг

**Бэктрекинг (backtracking)** — это процесс возврата назад по строке для поиска альтернативных путей совпадения,
если текущий путь не приводит к успешному совпадению
Регулярные выражения могут исследовать разные комбинации символов и паттернов, чтобы найти подходящее совпадение

## Пример бэктрекинга

Рассмотрим регулярное выражение `a(b|c)*d` и строку `abbbd`:

1. Начало сопоставления с `a` — успех
2. Далее идет `(b|c)*`, которое может захватить любое количество `b` или `c`. Сначала регулярное выражение захватывает все `b`: `abbb`
3. Теперь шаблон пытается сопоставить `d` после `abbb`. Строка заканчивается на `d`, и совпадение успешно завершается

Теперь возьмем строку `abbcd`:

1. Начало сопоставления с `a` — успех
2. Далее идет `(b|c)*`, которое снова захватывает все `b`: `abb`
3. Теперь шаблон пытается сопоставить `d` после `abb`. Это неудача, потому что следующий символ `c`
4. Регулярное выражение возвращается (бэктрекинг) к последнему совпавшему `b`, теперь пробует совпадение с `c`: `abbc`
5. Теперь шаблон пытается сопоставить `d` после `abbc`. Строка заканчивается на `d`, и совпадение успешно завершается

# Особенности в разных языках

## Java

### && ^
`[\w&&[^_]]` - Любой символ, подходящий под `\w`, кроме `_`.

## JavaScript

### Создание регулярного выражения
Литерал (через `/.../`)
```javascript
const regex = /pattern/;
```
Конструктор (через `RegExp`)
```javascript
const regex = new RegExp("pattern");
```
> [!NOTE]
> Конструктор полезен, если паттерн динамический

### Флаги (Modifiers)

Флаги изменяют поведение регулярного выражения

- `g` — глобальный поиск (поиск всех совпадений)
- `i` — игнорировать регистр
- `m` — многострочный режим (влияет на `^` и `$`)
- `s` — позволяет `.` соответствовать символам новой строки
- `u` — поддержка юникода (для работы с многобайтовыми символами)
- `y` — «приклеенный» режим поиска (начинается с текущей позиции)

```javascript
const regex = /abc/i;  // Игнорирует регистр
```

### Методы регулярных выражений

#### test
Проверяет, есть ли совпадения
Возвращает `true` или `false`
```javascript
const regex = /hello/;
console.log(regex.test('Hello, world!'));  // true
```
#### exec
Возвращает массив с информацией о первом совпадении (или `null`, если не найдено)
```javascript
const regex = /hello/;
const result = regex.exec('Hello, world!');
console.log(result);  // ['Hello']
```
#### match
Метод строки, возвращает все совпадения (включая глобальные)
```javascript
const str = 'ab, ac, ad';
console.log(str.match(/a./g));  // ['ab', 'ac', 'ad']
```
#### replace
Метод строки, заменяет совпадения на новый текст
```javascript
const str = 'abc def abc';
console.log(str.replace(/abc/g, 'xyz'));  // 'xyz def xyz'
```
#### split
Разделяет строку по шаблону регулярного выражения
```javascript
const str = 'apple,banana,grape';
console.log(str.split(/,/));  // ['apple', 'banana', 'grape']
```

### Особенности и полезные моменты

#### Использование с `g` (глобальный флаг)
Для получения всех совпадений нужно использовать `g`. Без этого флага будет возвращено только первое совпадение
```javascript
const regex = /\d+/g;
const result = 'abc 123 def 456 ghi'.match(regex);
console.log(result);  // ['123', '456']
```
#### Группы (с `()`)
Используй круглые скобки для группировки и захвата частей строки
```javascript
const regex = /(\d{3})-(\d{2})-(\d{4})/;
const result = '123-45-6789'.match(regex);
console.log(result);  // ['123-45-6789', '123', '45', '6789']
```
#### Базовые метасимволы
- `.` — любой символ, кроме новой строки
- `\d` — цифра (эквивалентно `[0-9]`)
- `\w` — символ слова (буквы, цифры и подчеркивание)
- `\s` — пробельный символ (пробел, табуляция, новая строка)
- `\b` — граница слова (например, `\bword\b` найдет "word", но не "sword")
- `^` — начало строки
- `$` — конец строки
```javascript
const regex = /^\d{3}-\d{2}-\d{4}$/;
console.log(regex.test('123-45-6789'));  // true
```
#### Опциональные элементы (с `?`)
Можно делать часть шаблона необязательной
```javascript
const regex = /colou?r/;  // 'colour' или 'color'
console.log(regex.test('color'));  // true
console.log(regex.test('colour'));  // true
```
#### Квантификаторы
- `{n}` — точно n раз
- `{n,}` — n и более раз
- `{n,m}` — от n до m раз
```javascript
const regex = /\d{2,4}/;  // от 2 до 4 цифр
console.log(regex.test('1234'));  // true
```
#### `(?: ...)` — неконтролируемая группа
Группа, которая не сохраняет свой результат в массиве (полезно для применения операторов без захвата)
```javascript
const regex = /(?:abc|def)/;
console.log(regex.test('abc'));  // true
console.log(regex.test('def'));  // true
```

### Работа с многобайтовыми символами и юникодом

- Для работы с юникодом, можно использовать флаг `u` (юникодный режим), что позволяет работать с эмодзи и другими многобайтовыми символами
```javascript
const regex = /\u{1F600}/u;  // Эмодзи 😀
console.log(regex.test('😀'));  // true
```
- `\p{...}` — для поиска символов по категориям в Unicode
```javascript
const regex = /\p{Letter}/gu;  // Все символы, которые являются буквами
console.log(regex.test('a'));  // true
```

### Пример использования с `y` (прилипание)
В режиме "прилипание" регулярное выражение будет искать совпадение начиная с текущей позиции в строке
```javascript
const regex = /abc/y;
const str = 'abcabc';
console.log(regex.exec(str));  // ['abc']
console.log(regex.exec(str));  // ['abc']
```
В режиме `y`, если в следующем вызове метода `exec()` нет совпадений с текущей позиции, вернется `null`
