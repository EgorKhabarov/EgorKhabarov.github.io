# REST (Representational State Transfer)

REST — это архитектурный стиль для разработки распределённых систем, особенно веб-сервисов,
который основывается на стандартных протоколах (обычно HTTP) и принципах взаимодействия клиент-сервер

## Основные принципы

| Принцип                                     | Описание                                                                                                 |
|---------------------------------------------|----------------------------------------------------------------------------------------------------------|
| Клиент-Сервер                               | Клиент и сервер разделены: клиент отвечает за интерфейс пользователя, сервер — за данные                 |
| Без состояния (Stateless)                   | Каждое обращение клиента к серверу должно быть независимым и содержать всю необходимую информацию        |
| Кэширование                                 | Ответы сервера могут кэшироваться для повышения производительности                                       |
| Единообразие интерфейса (Uniform Interface) | Использование единых соглашений в API (например, стандартных HTTP-методов)                               |
| Слои (Layered System)                       | Система может состоять из нескольких слоёв (серверы, кэши, шлюзы и т.д.), причём клиент об этом не знает |
| Код по требованию (Code on Demand)          | (Опционально) Сервер может передавать клиенту исполняемый код, например, JavaScript                      |

## Основные элементы

| Элемент                             | Описание                                                                             |
|-------------------------------------|--------------------------------------------------------------------------------------|
| Ресурсы                             | Объекты, к которым предоставляется доступ (например, "пользователи", "товары")       |
| `URI` (Uniform Resource Identifier) | Уникальный идентификатор ресурса, обычно URL (например, `/users/123`)                |
| Методы HTTP                         | Определяют действие, которое выполняется над ресурсом                                |
| Представления                       | Данные, которые возвращает сервер в различных форматах (`JSON`, `XML`, `HTML` и др.) |

## HTTP-методы

| Метод    | Назначение                | Пример              |
|----------|---------------------------|---------------------|
| `GET`    | Получение данных          | `GET /users/123`    |
| `POST`   | Создание ресурса          | `POST /users`       |
| `PUT`    | Полное обновление ресурса | `PUT /users/123`    |
| `PATCH`  | Частичное обновление      | `PATCH /users/123`  |
| `DELETE` | Удаление ресурса          | `DELETE /users/123` |

# Пример REST API

| Операция                      | HTTP Метод | URI           | Описание                                   |
|-------------------------------|------------|---------------|--------------------------------------------|
| Получить список пользователей | `GET`      | `/users`      | Возвращает всех пользователей              |
| Получить пользователя         | `GET`      | `/users/{id}` | Возвращает данные конкретного пользователя |
| Создать пользователя          | `POST`     | `/users`      | Создаёт нового пользователя                |
| Обновить данные пользователя  | `PUT`      | `/users/{id}` | Полностью обновляет данные пользователя    |
| Удалить пользователя          | `DELETE`   | `/users/{id}` | Удаляет пользователя                       |

`GET /users/123`
```json
{
  "id": 123,
  "name": "John Doe",
  "email": "john.doe@example.com"
}
```


# Коды состояния HTTP (HTTP Status Codes)

[[General/HTTP/Status%20Codes]]

| Код   | Значение              | Пример                                                               |
|-------|-----------------------|----------------------------------------------------------------------|
| `200` | OK                    | Запрос выполнен успешно                                              |
| `201` | Created               | Ресурс успешно создан (например, после `POST`-запроса)               |
| `204` | No Content            | Успешно, но без возвращаемого содержимого (например, после `DELETE`) |
| `400` | Bad Request           | Неверный запрос (например, отсутствует обязательное поле)            |
| `401` | Unauthorized          | Требуется авторизация                                                |
| `403` | Forbidden             | Доступ запрещён                                                      |
| `404` | Not Found             | Ресурс не найден                                                     |
| `500` | Internal Server Error | Ошибка на стороне сервера                                            |

# Принципы построения RESTful API

| Принцип                    | Описание                                                                                   |
|----------------------------|--------------------------------------------------------------------------------------------|
| Чёткая структура URL       | Используйте понятные и предсказуемые пути (`/users/123`)                                   |
| Использование HTTP-методов | Каждый метод должен чётко соответствовать действию (`GET` для чтения, `POST` для создания) |
| Смысловые коды состояния   | Возвращайте корректные HTTP-статусы (`200`, `404`, `500` и т.д.)                           |
| Формат ответов             | Возвращайте структурированные данные (JSON или XML)                                        |
| Версионирование            | Реализуйте версионирование API (например, `/v1/users`)                                     |

# Отличия REST от других архитектур

| Характеристика | REST                         | SOAP                            |
|----------------|------------------------------|---------------------------------|
| Лёгкость       | Простая реализация на `HTTP` | Требует сложных `XML`-сообщений |
| Форматы данных | `JSON`, `XML`, `HTML` и др   | Только `XML`                    |
| Гибкость       | Более гибкий                 | Более строгий стандарт          |

# REST vs RESTful

- `REST` — архитектурный стиль
- `RESTful` — практическая реализация REST-принципов в API

# Пример реализации REST API на Python (Flask)

```python
from flask import Flask, jsonify, request

app = Flask(__name__)

users = [
    {"id": 1, "name": "John Doe", "email": "john.doe@example.com"},
    {"id": 2, "name": "Jane Smith", "email": "jane.smith@example.com"}
]

@app.get("/users")
def get_users():
    return jsonify(users)


@app.get("/users/<int:user_id>")
def get_user(user_id: int):
    user = next((u for u in users if u["id"] == user_id), None)
    if user:
        return jsonify(user)
    return jsonify({"error": "User not found"}), 404


@app.post("/users")
def create_user():
    data = request.json
    new_user = {"id": len(users) + 1, "name": data["name"], "email": data["email"]}
    users.append(new_user)
    return jsonify(new_user), 201


if __name__ == "__main__":
    app.run(debug=True)
```
