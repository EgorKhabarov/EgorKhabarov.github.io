<h4>SequenceMatcher</h4>
Сравнение двух последовательностей и определение степени их сходства.
<pre><code class="language-python">import difflib

s1 = &quot;Hello, world!&quot;
s2 = &quot;Hello, everyone!&quot;

matcher = difflib.SequenceMatcher(None, s1, s2)
ratio = matcher.ratio()

print(f&quot;Similarity ratio: {ratio}&quot;)

&quot;&quot;&quot;Similarity ratio: 0.6206896551724138&quot;&quot;&quot;
</code></pre>
<h4>get_close_matches</h4>
Нахождение наиболее похожей строки в наборе строк на основе заданной строки.
<pre><code class="language-python">import difflib

colors = ['red', 'green', 'blue', 'yellow']
color = 'grea'

matches = difflib.get_close_matches(color, colors)

print(f&quot;Closest matches: {matches}&quot;)

&quot;&quot;&quot;Closest matches: ['green']&quot;&quot;&quot;
</code></pre>
<h4>unified_diff</h4>
Генерация отчета о различиях между двумя последовательностями.
<pre><code class="language-python">import difflib

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

d = difflib.unified_diff(text1.splitlines(), text2.splitlines())

print('\n'.join(d))

&quot;&quot;&quot;
---

+++

@@ -1,3 +1,3 @@

 Lorem ipsum dolor sit amet,
 consectetur adipiscing elit,
-sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
+sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.
&quot;&quot;&quot;
</code></pre>
<h4>HtmlDiff</h4>
Генерация отчета о различиях между двумя последовательностями в формате HTML.
<pre><code class="language-python">import difflib

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

d = difflib.HtmlDiff().make_file(text1.splitlines(), text2.splitlines())

with open('diff.html', 'w') as f:
    f.writelines(d)
</code></pre>
<h4>context_diff</h4>
Генерация отчета о различиях между двумя последовательностями в формате context diff.
<pre><code class="language-python">import difflib

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

d = difflib.context_diff(text1.splitlines(), text2.splitlines())

print('\n'.join(d))

&quot;&quot;&quot;
***

---

***************

*** 1,3 ****

  Lorem ipsum dolor sit amet,
  consectetur adipiscing elit,
! sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
--- 1,3 ----

  Lorem ipsum dolor sit amet,
  consectetur adipiscing elit,
! sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.
&quot;&quot;&quot;
</code></pre>
<h4>ndiff</h4>
Генерация отчета о различиях между двумя последовательностями в формате ndiff.
<pre><code class="language-python">import difflib

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

d = difflib.ndiff(text1.splitlines(), text2.splitlines())

print('\n'.join(d))

&quot;&quot;&quot;
  Lorem ipsum dolor sit amet,
  consectetur adipiscing elit,
- sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
?                                                          ^

+ sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.
?                                                          ^^       
&quot;&quot;&quot;
</code></pre>
<h4>isjunk и ignore</h4>
Использование пользовательских функций для игнорирования символов при сравнении последовательностей.
<pre><code class="language-python">import difflib

def isjunk(s):
    return s in [' ', '\n']

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

matcher = difflib.SequenceMatcher(isjunk, text1, text2)
ratio = matcher.ratio()

print(f&quot;Similarity ratio: {ratio}&quot;)

&quot;&quot;&quot;Similarity ratio: 0.9878542510121457&quot;&quot;&quot;
</code></pre>
<h4>reduce_func</h4>
Использование пользовательской функции для преобразования различий в отчете о сравнении.
<pre><code class="language-python">import difflib

text1 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;&quot;&quot;

text2 = &quot;&quot;&quot;Lorem ipsum dolor sit amet,
consectetur adipiscing elit,
sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&quot;&quot;&quot;

d = difflib.Differ()
diff = d.compare(text1.splitlines(), text2.splitlines())

def reduce_func(s):
    if s.startswith('- '):
        return f&quot;&amp;lt;span style='color:red'&gt;{s}&amp;lt;/span&gt;&quot;
    elif s.startswith('+ '):
        return f&quot;&amp;lt;span style='color:green'&gt;{s}&amp;lt;/span&gt;&quot;
    else:
        return s

diff = map(reduce_func, diff)
diff = '\n'.join(diff)

print(diff)

&quot;&quot;&quot;
  Lorem ipsum dolor sit amet,
  consectetur adipiscing elit,
&amp;lt;span style='color:red'&gt;- sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&amp;lt;/span&gt;
?                                                          ^

&amp;lt;span style='color:green'&gt;+ sed do eiusmod tempor incididunt ut labore et dolore magnus aliqua.&amp;lt;/span&gt;
?                                                          ^^                                         
&quot;&quot;&quot;
</code></pre>